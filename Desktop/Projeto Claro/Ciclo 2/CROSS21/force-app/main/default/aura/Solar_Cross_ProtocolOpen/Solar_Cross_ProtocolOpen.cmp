<aura:component  controller="Solar_Cross_ProtocolCodificationFlow">
    <aura:attribute name="recordId" type="String" />
    <aura:attribute name="contextCase" type="Object" />
    <aura:attribute name="message" type="String"/> 

    <aura:attribute name="isLoading" type="Boolean" default="true"/> 

    <aura:attribute name="categoryValue" type="String" />
    <!-- <aura:attribute name="productValue" type="String" /> -->
    <aura:attribute name="modalityValue" type="String" />
    <aura:attribute name="entryValue" type="String" />
    <aura:attribute name="leaveValue" type="String" />

    <aura:attribute name="resolutionValue" type="String" />
    <aura:attribute name="descriptionValue" type="String" />


    <aura:attribute name="categoryOptions" type="Object[]" />
    <!-- <aura:attribute name="productOptions" type="Object[]" /> -->
    <aura:attribute name="modalityOptions" type="Object[]" />
    <aura:attribute name="entryOptions" type="Object[]" />
    <aura:attribute name="leaveOptions" type="Object[]" />

    <aura:attribute name="loadingSave" type="Boolean" default="false" />
    <aura:attribute name="productShow" type="Boolean" default="false" />
    <aura:attribute name="modalityShow" type="Boolean" default="false" />
    <aura:attribute name="entryShow" type="Boolean" default="false" />
    <aura:attribute name="leaveShow" type="Boolean" default="false" />
    <aura:attribute name="enableUpdate" type="Boolean" default="true"/>     

    <aura:attribute name="showBKO" type="Boolean" default="false" />
    <aura:attribute name="showFCR" type="Boolean" default="false" />
    <aura:attribute name="viewMode" type="Boolean" default="false" />

    <aura:handler name="init" value="{! this }" action="{! c.onInit }"/>



    <div class="{!v.loadingSave == true ? 'slds-show' : 'slds-hide'}">
        <lightning:spinner alternativeText="Carregando..." size="medium" /> 
    </div> 

    
    <div class="slds-grid slds-gutters slds-align_absolute-center slds-m-top_medium">
        <div class="slds-col slds-size_2-of-3">
            <lightning:combobox name="progress" label="Categoria" value="{!v.categoryValue}" options="{!v.categoryOptions}" placeholder="--- Nenhum ---" required="true" onchange="{!c.categoryEvt}" disabled="{!v.viewMode}"/>
        </div>
    </div>
    
    <!-- <aura:if isTrue="{!v.productShow}">
        <div class="slds-grid slds-gutters slds-align_absolute-center">
            <div class="slds-col slds-size_2-of-3">
                <lightning:combobox name="progress" label="Produto" value="{!v.productValue}" options="{!v.productOptions}" placeholder="- Nenhum -" required="true" onchange="{!c.productEvt}"  disabled="{!v.viewMode}"/>
            </div>
        </div>
    </aura:if>  -->
    <aura:if isTrue="{!v.modalityShow}">
        <div class="slds-grid slds-gutters slds-align_absolute-center">
            <div class="slds-col slds-size_2-of-3">
                <lightning:combobox name="progress" label="Modalidade" value="{!v.modalityValue}" options="{!v.modalityOptions}" placeholder="--- Nenhum ---" required="true" onchange="{!c.modalityEvt}"  disabled="{!v.viewMode}"/>
            </div>
        </div>
    </aura:if>
    <aura:if isTrue="{!v.entryShow}">
        <div class="slds-grid slds-gutters slds-align_absolute-center">
            <div class="slds-col slds-size_2-of-3">
                <lightning:combobox name="progress" label="Motivo de entrada" value="{!v.entryValue}" options="{!v.entryOptions}" placeholder="--- Nenhum ---" required="true" onchange="{!c.entryEvt}" disabled="{!v.viewMode}"/>
            </div>
        </div>
    </aura:if>
    <aura:if isTrue="{!v.leaveShow}">
        <div class="slds-grid slds-gutters slds-align_absolute-center">
            <div class="slds-col slds-size_2-of-3">
                <lightning:combobox name="progress" label="Motivo de saída" value="{!v.leaveValue}" options="{!v.leaveOptions}" placeholder="--- Nenhum ---" required="true" onchange="{!c.leaveEvt}" disabled="{!v.viewMode}"/>
            </div>
        </div>
    </aura:if>    

    <aura:if isTrue="{!v.showFCR}">
        <div class="slds-grid slds-gutters slds-align_absolute-center">
            <div class="slds-col slds-size_2-of-3">
                <lightning:textarea name="Resolução" label="Resolução" maxlength="10000" value="{!v.resolutionValue}" required="true" onchange="{!c.validateStringField}" disabled="{!v.viewMode}"/>
            </div>
        </div>
    </aura:if>    

    <aura:if isTrue="{!v.showBKO}">
        <div class="slds-grid slds-gutters slds-align_absolute-center slds-m-top_x-small">
            <div class="slds-col slds-size_2-of-3">
                <div class="slds-box slds-theme_shade slds-theme_alert-texture">
                    <aura:unescapedHtml value="{!v.message}" />
                </div>
            </div>
        </div>
        <div class="slds-grid slds-gutters slds-align_absolute-center">
            <div class="slds-col slds-size_2-of-3">
                <lightning:textarea name="Descrição" label="Descrição" maxlength="10000" value="{!v.descriptionValue}" required="true" onchange="{!c.validateStringField}" disabled="{!v.viewMode}"/>
            </div>
        </div>
    </aura:if>    

    <aura:if isTrue="{! not(v.viewMode)}">
        <div class="slds-grid slds-gutters slds-m-top_medium">
            <div class="slds-col slds-size_1-of-1 slds-align_absolute-center">            
                <lightning:button class="slds-m-top_small" variant="neutral" label="Cancelar" onclick="{!c.cancel}" />
                <lightning:button class="slds-m-top_small" variant="brand" label="Salvar" onclick="{!c.updateContextCase}" disabled="{!v.enableUpdate}"/>
            </div>
        </div>
    </aura:if>    
</aura:component>