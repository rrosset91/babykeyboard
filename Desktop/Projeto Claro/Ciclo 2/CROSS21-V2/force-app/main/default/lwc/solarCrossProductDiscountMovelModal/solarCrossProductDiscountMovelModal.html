<template>
    <section id ="modal-fade-in-open" role="dialog" class="slds-modal slds-fade-in-open slds-modal_medium">
            <div class="slds-modal__container">
                <div style="float:right;">
                    <lightning-button-icon icon-name="utility:close" alternative-text="Close" title="Close" onclick={handleCloseModal} variant="bare-inverse" style="float:right;"></lightning-button-icon>
                </div>
                <header class="slds-modal__header">
                    <h2 id="modal-heading-01" class="slds-modal__title slds-hyphenate">Promoções e Descontos</h2>
                </header>
                <div class="slds-modal__content slds-p-around_large">
                <template for:each={offer} for:item="off">
                    <h1 class="slds-m-bottom_medium slds-m-left_xx-large slds-text-heading_medium custom-box" key={off.name}><strong>{off.name}</strong></h1>
                    <lightning-layout vertical-align="start" key={off.name}>
                        <lightning-layout-item size="5" class="slds-p-top_large slds-p-bottom_small slds-m-left_xx-large">
                            <span class="slds-text-align_left slds-text-title">Efetivação</span>
                            <div class="slds-text-heading_large slds-text-align_center slds-box">
                                <lightning-formatted-date-time value={off.effectiveDate} year="numeric" month="numeric" day="numeric"></lightning-formatted-date-time>
                            </div>
                        </lightning-layout-item>
                       <!-- <lightning-layout-item size="3" class="slds-p-top_large slds-p-bottom_small slds-m-left_xx-large">
                            <span class="slds-text-align_left slds-text-title">Expiração</span>
                            <div class="slds-text-heading_large  slds-text-align_center slds-box">
                                <lightning-formatted-date-time value={off.expirationDate} year="numeric" month="numeric" day="numeric"></lightning-formatted-date-time>
                            </div>
                        </lightning-layout-item>-->
                        <lightning-layout-item size="5" class="slds-p-top_large slds-p-bottom_small slds-m-left_xx-large">
                            <span class="slds-text-align_left slds-text-title">Valor da Assinatura</span>
                            <div class="slds-text-heading_large  slds-text-align_center slds-box">
                                <p><lightning-formatted-number value={off.signatureValue} format-style="currency"></lightning-formatted-number></p>
                            </div>
                        </lightning-layout-item>
                    </lightning-layout>
                    <!--<lightning-layout vertical-align="center">
                        <lightning-layout-item size="3" class="slds-p-top_large slds-p-bottom_large slds-m-left_xx-large">
                            <span class="slds-text-align_left slds-text-title">Valor do Desconto da Assinatura</span>
                            <div class="slds-text-heading_large slds-text-align_center slds-box custom-box">
                                <strong><lightning-formatted-number value={off.valueDiscountSubscription} format-style="currency"></lightning-formatted-number></strong>
                            </div>
                        </lightning-layout-item>
                        <lightning-layout-item size="3" class="slds-p-top_large slds-p-bottom_large slds-m-left_xx-large">
                            <span class="slds-text-align_left slds-text-title">Valor do Desconto Fidelidade</span>
                            <div class="slds-text-heading_large  slds-text-align_center slds-box custom-box">
                                <strong><lightning-formatted-number value={off.valueDiscountLoyalty} format-style="currency"></lightning-formatted-number></strong>
                            </div>
                        </lightning-layout-item>
                        <lightning-layout-item class="slds-p-top_large slds-p-bottom_large slds-m-left_small">
                            <div class="slds-text-heading_large  slds-text-align_center">
                                <span class="slds-m-left_xx-small">=</span>
                            </div>
                        </lightning-layout-item>
                        <lightning-layout-item size="3" class="slds-p-top_large slds-p-bottom_large slds-m-left_medium">
                            <span class="slds-text-align_left slds-text-title">Valor do Desconto Total</span>
                            <div class="slds-text-heading_large  slds-text-align_center slds-box custom-box">
                                <strong><lightning-formatted-number value={off.totalDiscount} format-style="currency"></lightning-formatted-number></strong>
                            </div>
                        </lightning-layout-item>
                    </lightning-layout>-->
                    <lightning-layout vertical-align="stretch" key={off.name}>
                        <lightning-layout-item size="2" class="slds-p-top_large slds-p-bottom_x-small slds-m-left_large">
                            <span class="slds-text-align_left slds-text-title">Tipo</span>
                            <div class="slds-text-align_left ">
                                <p>{off.type}</p>
                            </div>
                        </lightning-layout-item>
                        <lightning-layout-item size="2" class="slds-p-top_large slds-p-bottom_x-small">
                            <span class="slds-text-align_left slds-text-title">Nivel</span>
                            <div class="slds-text-align_left ">
                                <p>{off.level}</p>
                            </div>
                        </lightning-layout-item>
                        <lightning-layout-item size="2" class="slds-p-top_large slds-p-bottom_x-small">
                            <span class="slds-text-align_left slds-text-title">Situação</span>
                            <div class="slds-text-align_left ">
                                <p>{off.situation}</p>
                            </div>
                        </lightning-layout-item>
                        <lightning-layout-item size="2" class="slds-p-top_large slds-p-bottom_x-small">
                            <span class="slds-text-align_left slds-text-title">Aceitação</span>
                            <div class="slds-text-align_left ">
                                <lightning-formatted-date-time value={off.dateSituation} year="numeric" month="numeric" day="numeric" hour="2-digit" minute="2-digit"></lightning-formatted-date-time>
                            </div>
                        </lightning-layout-item>
                        <lightning-layout-item size="2" class="slds-p-top_large slds-p-bottom_x-small">
                            <span class="slds-text-align_left slds-text-title">Início de Carencia</span>
                            <div class="slds-text-align_left ">
                                <lightning-formatted-date-time value={off.needStartDate} year="numeric" month="numeric" day="numeric" hour="2-digit" minute="2-digit"></lightning-formatted-date-time>
                            </div>
                        </lightning-layout-item>
                        <lightning-layout-item size="2" class="slds-p-top_large slds-p-bottom_x-small">
                            <span class="slds-text-align_left slds-text-title">Prazo de Carência</span>
                            <div class="slds-text-align_left ">
                                <p>{off.gracePeriod}</p>
                            </div>
                        </lightning-layout-item>
                </lightning-layout>
                <lightning-layout vertical-align="stretch" key={off.name}>
                    <lightning-layout-item size="2" class="slds-p-bottom_large slds-m-left_large">
                        <span class="slds-text-align_left slds-text-title">Ativação</span>
                        <div class="slds-text-align_left ">
                            <lightning-formatted-date-time value={off.activationDate} year="numeric" month="numeric" day="numeric" hour="2-digit"
                            minute="2-digit"></lightning-formatted-date-time>
                        </div>
                    </lightning-layout-item>
                    <lightning-layout-item size="2" class="slds-p-bottom_large">
                        <span class="slds-text-align_left slds-text-title">Franquia de dados</span>
                        <div class="slds-text-align_left ">
                            <p></p>
                        </div>
                    </lightning-layout-item>
                </lightning-layout>
                <lightning-accordion allow-multiple-sections-open="true"  active-section-name={activeSections} key={off.name}>
                    <lightning-accordion-section label='Descontos' name="A">
                        <lightning-datatable key-field="id"
                        data={off.discounts}
                        columns={columns}
                        hide-checkbox-column = 'true'
                        default-sort-direction="asc"
                        sorted-direction={sortDirectionDiscount}
                        sorted-by={sortedByDiscount}
                        onsort={onHandleSortDiscount}
                        >
                        </lightning-datatable>
                    </lightning-accordion-section>
                    <lightning-accordion-section label="Serviço de Valor Agregado" name="B">
                        <lightning-datatable key-field="id"
                        data={off.svas}
                        columns={columns}
                        hide-checkbox-column = 'true'
                        default-sort-direction={defaultSortDirection}
                        sorted-direction={sortDirectionSVA}
                        sorted-by={sortedBySVA}
                        >
                        </lightning-datatable>
                    </lightning-accordion-section>
                    <lightning-accordion-section label="Outros" name="B">
                        <lightning-datatable key-field="id"
                        data={off.others}
                        columns={columns}
                        hide-checkbox-column = 'true'
                        default-sort-direction={defaultSortDirection}
                        sorted-direction={sortDirectionOthers}
                        sorted-by={sortedByOthers}
                        onsort={onHandleSortOther}
                        >
                        </lightning-datatable>
                    </lightning-accordion-section>
                </lightning-accordion>
                <div class="slds-border_bottom slds-m-bottom_xx-large" key={off.name}></div>
                </template>
                </div>
            </div>
        </section>
        <div id="modal-backdrop" class="slds-backdrop slds-backdrop_open"></div>
    </template>