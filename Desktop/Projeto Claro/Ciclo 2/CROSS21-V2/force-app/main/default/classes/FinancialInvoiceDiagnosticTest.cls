/**
 * @description       :
 * @author            : Joao Neves
 * @group             :
 * @last modified on  : 11-02-2021
 * @last modified by  : Joao Neves
 * Modifications Log
 * Ver   Date         Author       Modification
 * 1.0   11-02-2021   Joao Neves   Initial Version
 **/
@isTest
public class FinancialInvoiceDiagnosticTest {
	@isTest
	public static void shouldHaveDiffItems() {
		Test.setMock(HttpCalloutMock.class, getMockDiff());

		ServiceParameter__c eventsSettings = new ServiceParameter__c();
		eventsSettings.name = 'InvoiceDetails';
		eventsSettings.EndPoint__c = 'callout:OAGClaro/orders/request';
		eventsSettings.Method__c = 'GET';
		eventsSettings.Timeout__c = 120000;
		insert eventsSettings;

		Test.startTest();

		List<FinancialInvoiceDiagnostic.DiagnosticResponseInfos> testResp = FinancialInvoiceDiagnostic.compareInvoices('055', '010539926', '170480727', '172676785');

		System.assertEquals(9, testResp.size());

		Test.stopTest();
	}

	@isTest
	public static void shouldHaveDiffValues() {
		Test.setMock(HttpCalloutMock.class, getMockSameItems());

		ServiceParameter__c eventsSettings = new ServiceParameter__c();
		eventsSettings.name = 'InvoiceDetails';
		eventsSettings.EndPoint__c = 'callout:OAGClaro/orders/request';
		eventsSettings.Method__c = 'GET';
		eventsSettings.Timeout__c = 120000;
		insert eventsSettings;

		Test.startTest();

		List<FinancialInvoiceDiagnostic.DiagnosticResponseInfos> testResp = FinancialInvoiceDiagnostic.compareInvoices('055', '010539926', '170480727', '172676785');

		System.assertEquals(10, testResp.size());

		Test.stopTest();
	}

	private static MultipleHttpMock getMockDiff() {
		MultipleHttpMock mock = new MultipleHttpMock();
		HttpResponse res1 = new HttpResponse();
		res1.setBody(
			'{"apiVersion":"1;2019-12-04","transactionId":"Id-9ca62560d20e217fe6706406","data":{"invoiceId":170480727,"dueDate":"2019-11-25T00:00:00Z","partners":"NET / EMBRATEL / CLARO","paymentMethod":"DEBITO EM CONTA","status":"Pago","paymentDate":"2019-11-25T00:00:00Z","executeDate":"2019-11-26T00:00:00Z","cancelDate":null,"dueDay":25,"bestDayPaymentParameter":8,"billCode":"84680000006086902962019112505500000170480727","formatedBillCode":"84680000006-5 08690296201-7 91125055000-9 00170480727-8","amount":608.69,"totalTaxMessage":"Lei 12.741/12 - Tributos Federais (PIS e COFINS) 3,65% - ICMS TOTAL 56,28 - FUST TOTAL 2,69 - FUNTTEL TOTAL 1,33 - Lei 12.741/12 - Tributos Federais (PIS e COFINS) 3,65% - ICMS TOTAL 11,35","sourceInvoiceId":null,"invoiceItems":[{"name":"TV POR ASSINATURA","description":"01/10/19 A 31/10/19  MENSALIDADE CANAL A LA CARTE ","amount":20,"taxes":[{"taxType":"ICMS","value":2.4,"aliquot":25}]},{"name":"NET FONE VIA EMBRATEL / NET FONE VIA EMBRATE","description":"NET FONE VIA EMBRATEL / NET FONE VIA EMBRATE","amount":45.39,"taxes":[{"taxType":"ICMS","value":11.35,"aliquot":25},{"taxType":"COFINS","value":1.02,"aliquot":3}]},{"name":"PAY PER VIEW","description":"EVENTO NOW ","amount":29.8,"taxes":[{"taxType":"ICMS","value":3.58,"aliquot":25}]},{"name":"TV POR ASSINATURA","description":"01/10/19 A 31/10/19  MENSALIDADE TV PRINCIPAL SELEÇÃO TOP HD MAX FIDELIDADE ","amount":160.77,"taxes":[{"taxType":"ICMS","value":19.29,"aliquot":25},{"taxType":"COFINS","value":4.24,"aliquot":3},{"taxType":"FUST","value":1.36,"aliquot":1}]},{"name":"BANDA LARGA","description":"01/10/19 A 31/10/19  MENSALIDADE VIRTUA 120 MEGA FIDELIDADE ","amount":124.05,"taxes":[{"taxType":"ICMS","value":31.01,"aliquot":25},{"taxType":"COFINS","value":2.79,"aliquot":3}]}],"messages":[{"text":"Acesse net.com.br, para visualizar sua Fatura detalhada, emitir segunda via, tirar dúvidas, definir a forma de envio ou colocá-la em débito automático."},{"text":"A oferta conjunta NET Virtua + e composta pelo seu plano contratado e aplicativos digitais"},{"text":"SVA-PROTECAO DIGITAL  1 DEVICE CB:R$ 7 / -CINE EURO:R$ 7,5 / -CINE DOCS:R$ 9,9 / -CINE BR:R$ 7,5"}],"itemGroups":[{"chargeId":149858298,"groupId":13,"groupDescription":"Mensalidade NET TV","groupIdParent":12,"parentGroupDescription":"NET TV","amount":"160.77","productDescription":"01/10/19 A 31/10/19  MENSALIDADE TV PRINCIPAL SELEÇÃO TOP HD MAX FIDELIDADE"},{"chargeId":149858298,"groupId":16,"groupDescription":"A La Carte","groupIdParent":12,"parentGroupDescription":"NET TV","amount":"20","productDescription":"01/10/19 A 31/10/19  MENSALIDADE CANAL A LA CARTE"},{"chargeId":149858298,"groupId":19,"groupDescription":"Mensalidade NET VIRTUA +","groupIdParent":18,"parentGroupDescription":"NET VIRTUA +","amount":"155.95","productDescription":"01/10/19 A 31/10/19  OFERTA CONJUNTA 120 MEGA FIDELIDADE  + APLICATIVOS"},{"chargeId":149858298,"groupId":27,"groupDescription":"Serviços Técnicos","groupIdParent":21,"parentGroupDescription":"Itens Eventuais","amount":"45","productDescription":"07/11/19             TAXA ASSIST TECNICA VIRTUA 1/2"},{"chargeId":149858298,"groupId":32,"groupDescription":"Eventos Now","groupIdParent":21,"parentGroupDescription":"Itens Eventuais","amount":"14.9","productDescription":"20/10/19 - Aladdin"},{"chargeId":149858298,"groupId":32,"groupDescription":"Eventos Now","groupIdParent":21,"parentGroupDescription":"Itens Eventuais","amount":"14.9","productDescription":"25/10/19 - Luccas Neto em: Dia das Crianças"},{"chargeId":118698556,"groupId":1,"groupDescription":"NET FONE VIA EMBRATEL","groupIdParent":998,"parentGroupDescription":"NET Fone","amount":"45.39","productDescription":"ASSINATURA"},{"chargeId":118442242,"groupId":128,"groupDescription":"CLARO","groupIdParent":999,"parentGroupDescription":"Serviços Móveis","amount":"151.78","productDescription":"Mensalidade Claro"}],"partnerDebts":[{"partnerId":1,"partnerName":"NET","chargeId":149858298,"generationDate":"2019-11-06T00:00:00Z","originalDueDate":"2019-11-25T00:00:00Z","dueDate":null,"amountCharge":411.52,"amountPaid":411.52,"balance":0,"isExternalCollecting":null,"statusId":1,"status":"PAGAMENTO NORMAL","debtGroup":[{"groupId":13,"groupdescription":"Mensalidade NET TV","amount":"160.77","order":"2","extractItems":[{"idExtractItem":982133831,"idExtractItemType":"452","itemDescription":"ALUGUEL DE EQUIP HABILITADO","installmentNumber":null,"totalInstallments":null,"dueDate":"2019-10-25T00:00:00Z","entryDate":"2019-10-01T00:00:00Z","sourceValue":0,"addressComplement":null,"pointId":2770884,"productId":13561,"productDescription":"TOP HD PA GR 13561","proRataUnificationGroup":null,"proRataStartDate":null,"order":1,"itemGrouper":null},{"idExtractItem":982133846,"idExtractItemType":"2","itemDescription":"MENSALIDADE TV PRINCIPAL","installmentNumber":null,"totalInstallments":null,"dueDate":"2019-10-25T00:00:00Z","entryDate":"2019-10-01T00:00:00Z","sourceValue":160.77,"addressComplement":null,"pointId":2770880,"productId":18913,"productDescription":"TOP HD MAX FID 18913","proRataUnificationGroup":null,"proRataStartDate":null,"order":1,"itemGrouper":null}]},{"groupId":16,"groupdescription":"A La Carte","amount":"20","order":"5","extractItems":[{"idExtractItem":982133826,"idExtractItemType":"60","itemDescription":"MENSALIDADE CANAL A LA CARTE","installmentNumber":null,"totalInstallments":null,"dueDate":"2019-10-25T00:00:00Z","entryDate":"2019-10-01T00:00:00Z","sourceValue":0,"addressComplement":null,"pointId":2770880,"productId":11888,"productDescription":"REPLAY TV GRATIS","proRataUnificationGroup":null,"proRataStartDate":null,"order":1,"itemGrouper":null},{"idExtractItem":982133836,"idExtractItemType":"60","itemDescription":"MENSALIDADE CANAL A LA CARTE","installmentNumber":null,"totalInstallments":null,"dueDate":"2019-10-25T00:00:00Z","entryDate":"2019-10-01T00:00:00Z","sourceValue":20,"addressComplement":null,"pointId":2770880,"productId":52792,"productDescription":"TELECINE HD EXC RET","proRataUnificationGroup":null,"proRataStartDate":null,"order":1,"itemGrouper":null},{"idExtractItem":982133851,"idExtractItemType":"60","itemDescription":"MENSALIDADE CANAL A LA CARTE","installmentNumber":null,"totalInstallments":null,"dueDate":"2019-10-25T00:00:00Z","entryDate":"2019-10-01T00:00:00Z","sourceValue":0,"addressComplement":null,"pointId":2770884,"productId":19808,"productDescription":"TELECINE HD PARA DEMAIS PONTOS","proRataUnificationGroup":null,"proRataStartDate":null,"order":1,"itemGrouper":null},{"idExtractItem":982133855,"idExtractItemType":"60","itemDescription":"MENSALIDADE CANAL A LA CARTE","installmentNumber":null,"totalInstallments":null,"dueDate":"2019-10-25T00:00:00Z","entryDate":"2019-10-01T00:00:00Z","sourceValue":0,"addressComplement":null,"pointId":2770884,"productId":31439,"productDescription":"REPLAY TV PARA DEMAIS PONTOS","proRataUnificationGroup":null,"proRataStartDate":null,"order":1,"itemGrouper":null}]},{"groupId":19,"groupdescription":"Mensalidade NET VIRTUA +","amount":"155.95","order":"9","extractItems":[{"idExtractItem":982133807,"idExtractItemType":"400","itemDescription":"MENSALIDADE VIRTUA","installmentNumber":null,"totalInstallments":null,"dueDate":"2019-10-25T00:00:00Z","entryDate":"2019-10-01T00:00:00Z","sourceValue":0,"addressComplement":null,"pointId":2770881,"productId":3447,"productDescription":"COMODATO","proRataUnificationGroup":null,"proRataStartDate":null,"order":1,"itemGrouper":null},{"idExtractItem":982133813,"idExtractItemType":"400","itemDescription":"MENSALIDADE VIRTUA","installmentNumber":null,"totalInstallments":null,"dueDate":"2019-10-25T00:00:00Z","entryDate":"2019-10-01T00:00:00Z","sourceValue":0,"addressComplement":null,"pointId":2770881,"productId":4700,"productDescription":"ACESSO GRATIS","proRataUnificationGroup":null,"proRataStartDate":null,"order":1,"itemGrouper":null},{"idExtractItem":982133841,"idExtractItemType":"400","itemDescription":"MENSALIDADE VIRTUA","installmentNumber":null,"totalInstallments":null,"dueDate":"2019-10-25T00:00:00Z","entryDate":"2019-10-01T00:00:00Z","sourceValue":124.05,"addressComplement":null,"pointId":2770881,"productId":18196,"productDescription":"VIRTUA 120M FIDELIDADE 18196","proRataUnificationGroup":null,"proRataStartDate":null,"order":1,"itemGrouper":null},{"idExtractItem":982146619,"idExtractItemType":"269","itemDescription":"MENS SEGURANCA E ARMAZ AVULSO","installmentNumber":null,"totalInstallments":null,"dueDate":"2019-10-25T00:00:00Z","entryDate":"2019-10-01T00:00:00Z","sourceValue":7,"addressComplement":null,"pointId":null,"productId":null,"productDescription":"ANTI VIRUS PROT DIG 1 DEVICE CB - PF","proRataUnificationGroup":null,"proRataStartDate":null,"order":1,"itemGrouper":982133841},{"idExtractItem":982146620,"idExtractItemType":"481","itemDescription":"MENS CONTEUDO DIGITAL AVULSO","installmentNumber":null,"totalInstallments":null,"dueDate":"2019-10-25T00:00:00Z","entryDate":"2019-10-01T00:00:00Z","sourceValue":7.5,"addressComplement":null,"pointId":null,"productId":null,"productDescription":"CINE EURO","proRataUnificationGroup":null,"proRataStartDate":null,"order":1,"itemGrouper":982133841},{"idExtractItem":982146621,"idExtractItemType":"481","itemDescription":"MENS CONTEUDO DIGITAL AVULSO","installmentNumber":null,"totalInstallments":null,"dueDate":"2019-10-25T00:00:00Z","entryDate":"2019-10-01T00:00:00Z","sourceValue":9.9,"addressComplement":null,"pointId":null,"productId":null,"productDescription":"CINE DOCS","proRataUnificationGroup":null,"proRataStartDate":null,"order":1,"itemGrouper":982133841},{"idExtractItem":982146622,"idExtractItemType":"481","itemDescription":"MENS CONTEUDO DIGITAL AVULSO","installmentNumber":null,"totalInstallments":null,"dueDate":"2019-10-25T00:00:00Z","entryDate":"2019-10-01T00:00:00Z","sourceValue":7.5,"addressComplement":null,"pointId":null,"productId":null,"productDescription":"CINE BR","proRataUnificationGroup":null,"proRataStartDate":null,"order":1,"itemGrouper":982133841}]},{"groupId":27,"groupdescription":"Serviços Técnicos","amount":"45","order":"18","extractItems":[{"idExtractItem":986457480,"idExtractItemType":"250","itemDescription":"TAXA ASSIST TECNICA VIRTUA","installmentNumber":1,"totalInstallments":2,"dueDate":"2019-11-07T00:00:00Z","entryDate":"2019-11-07T00:00:00Z","sourceValue":45,"addressComplement":null,"pointId":null,"productId":18913,"productDescription":"TOP HD MAX FID 18913","proRataUnificationGroup":null,"proRataStartDate":null,"order":1,"itemGrouper":null}]},{"groupId":32,"groupdescription":"Eventos Now","amount":"29.8","order":"22","extractItems":[{"idExtractItem":973264941,"idExtractItemType":"456","itemDescription":"Aladdin ","installmentNumber":1,"totalInstallments":1,"dueDate":"2019-10-20T00:43:09Z","entryDate":"2019-10-20T00:43:09Z","sourceValue":14.9,"addressComplement":null,"pointId":null,"productId":14646,"productDescription":"EVENTO ON DEMAND","proRataUnificationGroup":null,"proRataStartDate":null,"order":1,"itemGrouper":null},{"idExtractItem":981661037,"idExtractItemType":"456","itemDescription":"Luccas Neto em: Dia das Crianças ","installmentNumber":1,"totalInstallments":1,"dueDate":"2019-10-25T23:11:03Z","entryDate":"2019-10-25T23:11:03Z","sourceValue":14.9,"addressComplement":null,"pointId":null,"productId":14646,"productDescription":"EVENTO ON DEMAND","proRataUnificationGroup":null,"proRataStartDate":null,"order":1,"itemGrouper":null}]}],"serviceGroup":null},{"partnerId":2,"partnerName":"EMBRATEL","chargeId":118698556,"generationDate":"2019-10-31T14:11:26Z","originalDueDate":"2019-11-25T00:00:00Z","dueDate":"2019-11-25T00:00:00Z","amountCharge":45.39,"amountPaid":45.39,"balance":0,"isExternalCollecting":null,"statusId":1,"status":"PAGAMENTO NORMAL","debtGroup":null,"serviceGroup":[{"groupId":1,"groupDescription":"NET FONE VIA EMBRATEL","partnerServiceId":1,"partnerServiceDescription":"NET FONE VIA EMBRATEL","partnerServiceAmount":45.39,"partnerExtracts":null,"partnerPhones":[{"originTerminal":"1139633313--FRANQUIA 001","amount":45.39,"partnerExtracts":[{"idExtractItem":496920070,"installmentNumber":null,"totalInstallments":null,"dueDate":"2019-11-25T00:00:00Z","entryDate":"2019-11-06T10:20:07Z","partnerItemId":143,"partnerItemDescription":"NETFONE ILIMITADO BRASIL 21 PROMOCIONAL","idExtractItemType":"1075","itemDescription":"NETFONE ILIM BRASIL 21 PROMO","amount":45.39,"isContested":"N","addressComplement":null,"details":[{"idDetExtractItem":3803146440,"sequenceNumber":1,"startDate":"2019-09-27T00:00:00Z","endDate":"2019-10-26T00:00:00Z","startTime":"      ","endTime":"      ","origin":"JAI SP","destination":null,"destinationCountry":"   ","callDuration":1,"callDurationUnit":"UNIDADE","callValue":32.39,"callDetailValue":45.39,"originTerminal":"1139633313--FRANQUIA 001","targetTerminal":null,"taxType":"E","entryDate":"2019-11-06T10:20:07Z"}]}]}]}]},{"partnerId":16,"partnerName":"CLARO","chargeId":118442242,"generationDate":"2019-10-28T14:31:13Z","originalDueDate":"2019-11-25T00:00:00Z","dueDate":"2019-11-25T00:00:00Z","amountCharge":151.78,"amountPaid":151.78,"balance":0,"isExternalCollecting":null,"statusId":1,"status":"PAGAMENTO NORMAL","debtGroup":null,"serviceGroup":[{"groupId":128,"groupDescription":"CLARO","partnerServiceId":128,"partnerServiceDescription":"CLARO","partnerServiceAmount":151.78,"partnerExtracts":[{"idExtractItem":496188975,"installmentNumber":null,"totalInstallments":null,"dueDate":"2019-11-25T00:00:00Z","entryDate":"2019-10-28T14:34:00Z","partnerItemId":82,"partnerItemDescription":"Mensalidade Claro","idExtractItemType":"998","itemDescription":"CLARO","amount":151.78,"isContested":"N","addressComplement":null,"details":[{"idDetExtractItem":3799141076,"sequenceNumber":1,"startDate":null,"endDate":null,"startTime":null,"endTime":null,"origin":null,"destination":null,"destinationCountry":null,"callDuration":1,"callDurationUnit":null,"callValue":151.78,"callDetailValue":151.78,"originTerminal":null,"targetTerminal":null,"taxType":null,"entryDate":"2019-10-28T14:34:09Z"}]}],"partnerPhones":null}]}]}}'
		);
		res1.setStatusCode(200);
		mock.addResponse(res1);
		HttpResponse res2 = new HttpResponse();
		res2.setBody(
			'{"apiVersion":"1;2019-12-04","transactionId":"Id-c9a62560d60e008065ae08ed","data":{"invoiceId":172676785,"dueDate":"2021-01-06T00:00:00Z","partners":"NET / EMBRATEL","paymentMethod":"DEBITO EM CONTA","status":"Em Aberto","paymentDate":null,"executeDate":null,"cancelDate":null,"dueDay":25,"bestDayPaymentParameter":8,"billCode":"84610000003160102962021010605500000172676785","formatedBillCode":"84610000003-9 16010296202-6 10106055000-7 00172676785-6","amount":316.01,"totalTaxMessage":"Lei 12.741/12 - Tributos Federais (PIS e COFINS) 3,65% - ICMS TOTAL 11,35","sourceInvoiceId":172676783,"invoiceItems":[{"name":"NET FONE VIA EMBRATEL / NET FONE VIA EMBRATE","description":"NET FONE VIA EMBRATEL / NET FONE VIA EMBRATE","amount":45.39,"taxes":[{"taxType":"ICMS","value":11.35,"aliquot":25},{"taxType":"COFINS","value":1.02,"aliquot":3}]}],"messages":[{"text":"SVA-PROTECAO DIGITAL  1 DEVICE CB:R$ 7 / -CINE EURO:R$ 7,5 / -CINE DOCS:R$ 9,9 / -CINE BR:R$ 7,5"}],"itemGroups":[{"chargeId":152406179,"groupId":13,"groupDescription":"Mensalidade NET TV","groupIdParent":12,"parentGroupDescription":"NET TV","amount":"160.77","productDescription":"MENSALIDADE TV PRINCIPAL"},{"chargeId":152406179,"groupId":16,"groupDescription":"A La Carte","groupIdParent":12,"parentGroupDescription":"NET TV","amount":"20","productDescription":"MENSALIDADE CANAL A LA CARTE"},{"chargeId":152406179,"groupId":19,"groupDescription":"Mensalidade NET VIRTUA +","groupIdParent":18,"parentGroupDescription":"NET VIRTUA +","amount":"135.95","productDescription":"MENSALIDADE VIRTUA"},{"chargeId":152406179,"groupId":27,"groupDescription":"Serviços Técnicos","groupIdParent":21,"parentGroupDescription":"Itens Eventuais","amount":"45","productDescription":"30/12/20             TAXA ASSIST TECNICA VIRTUA 2/2"},{"chargeId":152406179,"groupId":28,"groupDescription":"Descontos/Cancelamentos","groupIdParent":21,"parentGroupDescription":"Itens Eventuais","amount":"-45","productDescription":"DESC TAXA DE SERVICOS TECNICOS"},{"chargeId":152406179,"groupId":28,"groupDescription":"Descontos/Cancelamentos","groupIdParent":21,"parentGroupDescription":"Itens Eventuais","amount":"-45","productDescription":"DESCONTO DE MENSALIDADE"},{"chargeId":152406179,"groupId":29,"groupDescription":"Outros","groupIdParent":21,"parentGroupDescription":"Itens Eventuais","amount":"-20","productDescription":"ESTORNO CANAL A LA CARTE"},{"chargeId":152406179,"groupId":32,"groupDescription":"Eventos Now","groupIdParent":21,"parentGroupDescription":"Itens Eventuais","amount":"18.9","productDescription":"30/12/20             EVENTO NOW"},{"chargeId":119858674,"groupId":1,"groupDescription":"NET FONE VIA EMBRATEL","groupIdParent":998,"parentGroupDescription":"NET Fone","amount":"45.39","productDescription":"ASSINATURA"}],"partnerDebts":[{"partnerId":1,"partnerName":"NET","chargeId":152406179,"generationDate":null,"originalDueDate":"2019-12-25T00:00:00Z","dueDate":"2021-01-06T00:00:00Z","amountCharge":270.62,"amountPaid":null,"balance":270.62,"isExternalCollecting":"N","statusId":10,"status":"EM ABERTO","debtGroup":[{"groupId":13,"groupdescription":"Mensalidade NET TV","amount":"160.77","order":"2","extractItems":[{"idExtractItem":1010682481,"idExtractItemType":"452","itemDescription":"ALUGUEL DE EQUIP HABILITADO","installmentNumber":null,"totalInstallments":null,"dueDate":"2019-11-25T00:00:00Z","entryDate":"2020-12-30T00:00:00Z","sourceValue":0,"addressComplement":null,"pointId":2770884,"productId":13561,"productDescription":"TOP HD PA GR 13561","proRataUnificationGroup":null,"proRataStartDate":null,"order":1,"itemGrouper":null},{"idExtractItem":1010682484,"idExtractItemType":"2","itemDescription":"MENSALIDADE TV PRINCIPAL","installmentNumber":null,"totalInstallments":null,"dueDate":"2019-11-25T00:00:00Z","entryDate":"2020-12-30T00:00:00Z","sourceValue":160.77,"addressComplement":null,"pointId":2770880,"productId":18913,"productDescription":"TOP HD MAX FID 18913","proRataUnificationGroup":null,"proRataStartDate":null,"order":1,"itemGrouper":null}]},{"groupId":16,"groupdescription":"A La Carte","amount":"20","order":"5","extractItems":[{"idExtractItem":1010682480,"idExtractItemType":"60","itemDescription":"MENSALIDADE CANAL A LA CARTE","installmentNumber":null,"totalInstallments":null,"dueDate":"2019-11-25T00:00:00Z","entryDate":"2020-12-30T00:00:00Z","sourceValue":0,"addressComplement":null,"pointId":2770880,"productId":11888,"productDescription":"REPLAY TV GRATIS","proRataUnificationGroup":null,"proRataStartDate":null,"order":1,"itemGrouper":null},{"idExtractItem":1010682482,"idExtractItemType":"60","itemDescription":"MENSALIDADE CANAL A LA CARTE","installmentNumber":null,"totalInstallments":null,"dueDate":"2019-11-25T00:00:00Z","entryDate":"2020-12-30T00:00:00Z","sourceValue":20,"addressComplement":null,"pointId":2770880,"productId":52792,"productDescription":"TELECINE HD EXC RET","proRataUnificationGroup":null,"proRataStartDate":null,"order":1,"itemGrouper":null},{"idExtractItem":1010682485,"idExtractItemType":"60","itemDescription":"MENSALIDADE CANAL A LA CARTE","installmentNumber":null,"totalInstallments":null,"dueDate":"2019-11-25T00:00:00Z","entryDate":"2020-12-30T00:00:00Z","sourceValue":0,"addressComplement":null,"pointId":2770884,"productId":19808,"productDescription":"TELECINE HD PARA DEMAIS PONTOS","proRataUnificationGroup":null,"proRataStartDate":null,"order":1,"itemGrouper":null},{"idExtractItem":1010682486,"idExtractItemType":"60","itemDescription":"MENSALIDADE CANAL A LA CARTE","installmentNumber":null,"totalInstallments":null,"dueDate":"2019-11-25T00:00:00Z","entryDate":"2020-12-30T00:00:00Z","sourceValue":0,"addressComplement":null,"pointId":2770884,"productId":31439,"productDescription":"REPLAY TV PARA DEMAIS PONTOS","proRataUnificationGroup":null,"proRataStartDate":null,"order":1,"itemGrouper":null}]},{"groupId":19,"groupdescription":"Mensalidade NET VIRTUA +","amount":"135.95","order":"9","extractItems":[{"idExtractItem":1010682477,"idExtractItemType":"400","itemDescription":"MENSALIDADE VIRTUA","installmentNumber":null,"totalInstallments":null,"dueDate":"2019-11-25T00:00:00Z","entryDate":"2020-12-30T00:00:00Z","sourceValue":0,"addressComplement":null,"pointId":2770881,"productId":3447,"productDescription":"COMODATO","proRataUnificationGroup":null,"proRataStartDate":null,"order":1,"itemGrouper":null},{"idExtractItem":1010682478,"idExtractItemType":"400","itemDescription":"MENSALIDADE VIRTUA","installmentNumber":null,"totalInstallments":null,"dueDate":"2019-11-25T00:00:00Z","entryDate":"2020-12-30T00:00:00Z","sourceValue":0,"addressComplement":null,"pointId":2770881,"productId":4700,"productDescription":"ACESSO GRATIS","proRataUnificationGroup":null,"proRataStartDate":null,"order":1,"itemGrouper":null},{"idExtractItem":1010682483,"idExtractItemType":"400","itemDescription":"MENSALIDADE VIRTUA","installmentNumber":null,"totalInstallments":null,"dueDate":"2019-11-25T00:00:00Z","entryDate":"2020-12-30T00:00:00Z","sourceValue":124.05,"addressComplement":null,"pointId":2770881,"productId":18196,"productDescription":"VIRTUA 120M FIDELIDADE 18196","proRataUnificationGroup":null,"proRataStartDate":null,"order":1,"itemGrouper":null},{"idExtractItem":1010682489,"idExtractItemType":"269","itemDescription":"MENS SEGURANCA E ARMAZ AVULSO","installmentNumber":null,"totalInstallments":null,"dueDate":"2019-11-25T00:00:00Z","entryDate":"2020-12-30T00:00:00Z","sourceValue":7,"addressComplement":null,"pointId":null,"productId":null,"productDescription":"ANTI VIRUS PROT DIG 1 DEVICE CB - PF","proRataUnificationGroup":null,"proRataStartDate":null,"order":1,"itemGrouper":1010682483},{"idExtractItem":1010682490,"idExtractItemType":"481","itemDescription":"MENS CONTEUDO DIGITAL AVULSO","installmentNumber":null,"totalInstallments":null,"dueDate":"2019-11-25T00:00:00Z","entryDate":"2020-12-30T00:00:00Z","sourceValue":7.5,"addressComplement":null,"pointId":null,"productId":null,"productDescription":"CINE EURO","proRataUnificationGroup":null,"proRataStartDate":null,"order":1,"itemGrouper":1010682483},{"idExtractItem":1010682491,"idExtractItemType":"481","itemDescription":"MENS CONTEUDO DIGITAL AVULSO","installmentNumber":null,"totalInstallments":null,"dueDate":"2019-11-25T00:00:00Z","entryDate":"2020-12-30T00:00:00Z","sourceValue":9.9,"addressComplement":null,"pointId":null,"productId":null,"productDescription":"CINE DOCS","proRataUnificationGroup":null,"proRataStartDate":null,"order":1,"itemGrouper":1010682483},{"idExtractItem":1010682492,"idExtractItemType":"481","itemDescription":"MENS CONTEUDO DIGITAL AVULSO","installmentNumber":null,"totalInstallments":null,"dueDate":"2019-11-25T00:00:00Z","entryDate":"2020-12-30T00:00:00Z","sourceValue":7.5,"addressComplement":null,"pointId":null,"productId":null,"productDescription":"CINE BR","proRataUnificationGroup":null,"proRataStartDate":null,"order":1,"itemGrouper":1010682483},{"idExtractItem":1010682496,"idExtractItemType":"361","itemDescription":"ESTORNO MENSALIDADE VIRTUA","installmentNumber":1,"totalInstallments":null,"dueDate":"2020-12-30T00:00:00Z","entryDate":"2020-12-30T00:00:00Z","sourceValue":-20,"addressComplement":null,"pointId":2770881,"productId":null,"productDescription":"VIRTUA 120M FIDELIDADE 18196","proRataUnificationGroup":null,"proRataStartDate":null,"order":1,"itemGrouper":1010682483}]},{"groupId":27,"groupdescription":"Serviços Técnicos","amount":"45","order":"18","extractItems":[{"idExtractItem":1010682494,"idExtractItemType":"250","itemDescription":"TAXA ASSIST TECNICA VIRTUA","installmentNumber":2,"totalInstallments":2,"dueDate":"2019-12-07T00:00:00Z","entryDate":"2020-12-30T00:00:00Z","sourceValue":45,"addressComplement":null,"pointId":null,"productId":18913,"productDescription":"TOP HD MAX FID 18913","proRataUnificationGroup":null,"proRataStartDate":null,"order":1,"itemGrouper":null}]},{"groupId":28,"groupdescription":"Descontos/Cancelamentos","amount":"-90","order":"19","extractItems":[{"idExtractItem":1010682475,"idExtractItemType":"324","itemDescription":"DESC TAXA DE SERVICOS TECNICOS","installmentNumber":1,"totalInstallments":null,"dueDate":"2019-12-14T00:00:00Z","entryDate":"2020-12-30T00:00:00Z","sourceValue":-45,"addressComplement":null,"pointId":null,"productId":18913,"productDescription":"TOP HD MAX FID 18913","proRataUnificationGroup":null,"proRataStartDate":null,"order":1,"itemGrouper":null},{"idExtractItem":1010682476,"idExtractItemType":"831","itemDescription":"DESCONTO DE MENSALIDADE","installmentNumber":1,"totalInstallments":null,"dueDate":"2019-12-16T00:00:00Z","entryDate":"2020-12-30T00:00:00Z","sourceValue":-45,"addressComplement":null,"pointId":2770880,"productId":18913,"productDescription":"TOP HD MAX FID 18913","proRataUnificationGroup":null,"proRataStartDate":null,"order":1,"itemGrouper":null}]},{"groupId":29,"groupdescription":"Outros","amount":"-20","order":"20","extractItems":[{"idExtractItem":1010682488,"idExtractItemType":"170","itemDescription":"REVISTA NET AVULSA","installmentNumber":null,"totalInstallments":null,"dueDate":"2019-11-25T00:00:00Z","entryDate":"2020-12-30T00:00:00Z","sourceValue":0,"addressComplement":null,"pointId":null,"productId":36681,"productDescription":"04_CLARO POSMAIS 6GB-SEM APARELHO-DOBRO","proRataUnificationGroup":null,"proRataStartDate":null,"order":1,"itemGrouper":null},{"idExtractItem":1010682495,"idExtractItemType":"362","itemDescription":"ESTORNO CANAL A LA CARTE","installmentNumber":1,"totalInstallments":null,"dueDate":"2020-12-30T00:00:00Z","entryDate":"2020-12-30T00:00:00Z","sourceValue":-20,"addressComplement":null,"pointId":2770880,"productId":52792,"productDescription":"TELECINE HD EXC RET","proRataUnificationGroup":null,"proRataStartDate":null,"order":1,"itemGrouper":null}]},{"groupId":32,"groupdescription":"Eventos Now","amount":"18.9","order":"22","extractItems":[{"idExtractItem":1010682493,"idExtractItemType":"456","itemDescription":"Rambo: Até o Fim - Pré Lançamento ","installmentNumber":1,"totalInstallments":1,"dueDate":"2019-12-05T00:41:54Z","entryDate":"2019-12-05T00:41:54Z","sourceValue":18.9,"addressComplement":null,"pointId":null,"productId":14646,"productDescription":"EVENTO ON DEMAND","proRataUnificationGroup":null,"proRataStartDate":null,"order":1,"itemGrouper":null}]}],"serviceGroup":null},{"partnerId":2,"partnerName":"EMBRATEL","chargeId":119858674,"generationDate":"2019-12-03T11:55:47Z","originalDueDate":"2019-12-25T00:00:00Z","dueDate":"2021-01-06T00:00:00Z","amountCharge":45.39,"amountPaid":null,"balance":45.39,"isExternalCollecting":null,"statusId":10,"status":"EM ABERTO","debtGroup":null,"serviceGroup":[{"groupId":1,"groupDescription":"NET FONE VIA EMBRATEL","partnerServiceId":1,"partnerServiceDescription":"NET FONE VIA EMBRATEL","partnerServiceAmount":45.39,"partnerExtracts":null,"partnerPhones":[{"originTerminal":"1139633313--FRANQUIA 001","amount":45.39,"partnerExtracts":[{"idExtractItem":499642927,"installmentNumber":null,"totalInstallments":null,"dueDate":"2019-12-25T00:00:00Z","entryDate":"2019-12-04T15:14:44Z","partnerItemId":143,"partnerItemDescription":"NETFONE ILIMITADO BRASIL 21 PROMOCIONAL","idExtractItemType":"1075","itemDescription":"NETFONE ILIM BRASIL 21 PROMO","amount":45.39,"isContested":"N","addressComplement":null,"details":[{"idDetExtractItem":3816093065,"sequenceNumber":1,"startDate":"2019-10-27T00:00:00Z","endDate":"2019-11-26T00:00:00Z","startTime":"      ","endTime":"      ","origin":"JAI SP","destination":null,"destinationCountry":"   ","callDuration":1,"callDurationUnit":"UNIDADE","callValue":32.39,"callDetailValue":45.39,"originTerminal":"1139633313--FRANQUIA 001","targetTerminal":null,"taxType":"E","entryDate":"2019-12-04T15:14:44Z"}]}]}]}]}]}}'
		);
		res2.setStatusCode(200);
		mock.addResponse(res2);
		return mock;
	}

	private static MultipleHttpMock getMockSameItems() {
		MultipleHttpMock mock = new MultipleHttpMock();
		HttpResponse res1 = new HttpResponse();
		res1.setBody(
			'{"apiVersion":"1;2019-12-04","transactionId":"Id-c9a62560d60e008065ae08ed","data":{"invoiceId":172676785,"dueDate":"2021-01-06T00:00:00Z","partners":"NET / EMBRATEL","paymentMethod":"DEBITO EM CONTA","status":"Em Aberto","paymentDate":null,"executeDate":null,"cancelDate":null,"dueDay":25,"bestDayPaymentParameter":8,"billCode":"84610000003160102962021010605500000172676785","formatedBillCode":"84610000003-9 16010296202-6 10106055000-7 00172676785-6","amount":316.01,"totalTaxMessage":"Lei 12.741/12 - Tributos Federais (PIS e COFINS) 3,65% - ICMS TOTAL 11,35","sourceInvoiceId":172676783,"invoiceItems":[{"name":"NET FONE VIA EMBRATEL / NET FONE VIA EMBRATE","description":"NET FONE VIA EMBRATEL / NET FONE VIA EMBRATE","amount":45.39,"taxes":[{"taxType":"ICMS","value":11.35,"aliquot":25},{"taxType":"COFINS","value":1.02,"aliquot":3}]}],"messages":[{"text":"SVA-PROTECAO DIGITAL  1 DEVICE CB:R$ 7 / -CINE EURO:R$ 7,5 / -CINE DOCS:R$ 9,9 / -CINE BR:R$ 7,5"}],"itemGroups":[{"chargeId":152406179,"groupId":13,"groupDescription":"Mensalidade NET TV","groupIdParent":12,"parentGroupDescription":"NET TV","amount":"160.77","productDescription":"MENSALIDADE TV PRINCIPAL"},{"chargeId":152406179,"groupId":16,"groupDescription":"A La Carte","groupIdParent":12,"parentGroupDescription":"NET TV","amount":"20","productDescription":"MENSALIDADE CANAL A LA CARTE"},{"chargeId":152406179,"groupId":19,"groupDescription":"Mensalidade NET VIRTUA +","groupIdParent":18,"parentGroupDescription":"NET VIRTUA +","amount":"135.95","productDescription":"MENSALIDADE VIRTUA"},{"chargeId":152406179,"groupId":27,"groupDescription":"Serviços Técnicos","groupIdParent":21,"parentGroupDescription":"Itens Eventuais","amount":"45","productDescription":"30/12/20             TAXA ASSIST TECNICA VIRTUA 2/2"},{"chargeId":152406179,"groupId":28,"groupDescription":"Descontos/Cancelamentos","groupIdParent":21,"parentGroupDescription":"Itens Eventuais","amount":"-45","productDescription":"DESC TAXA DE SERVICOS TECNICOS"},{"chargeId":152406179,"groupId":28,"groupDescription":"Descontos/Cancelamentos","groupIdParent":21,"parentGroupDescription":"Itens Eventuais","amount":"-45","productDescription":"DESCONTO DE MENSALIDADE"},{"chargeId":152406179,"groupId":29,"groupDescription":"Outros","groupIdParent":21,"parentGroupDescription":"Itens Eventuais","amount":"-20","productDescription":"ESTORNO CANAL A LA CARTE"},{"chargeId":152406179,"groupId":32,"groupDescription":"Eventos Now","groupIdParent":21,"parentGroupDescription":"Itens Eventuais","amount":"18.9","productDescription":"30/12/20             EVENTO NOW"},{"chargeId":119858674,"groupId":1,"groupDescription":"NET FONE VIA EMBRATEL","groupIdParent":998,"parentGroupDescription":"NET Fone","amount":"45.39","productDescription":"ASSINATURA"}],"partnerDebts":[{"partnerId":1,"partnerName":"NET","chargeId":152406179,"generationDate":null,"originalDueDate":"2019-12-25T00:00:00Z","dueDate":"2021-01-06T00:00:00Z","amountCharge":270.62,"amountPaid":null,"balance":270.62,"isExternalCollecting":"N","statusId":10,"status":"EM ABERTO","debtGroup":[{"groupId":13,"groupdescription":"Mensalidade NET TV","amount":"160.77","order":"2","extractItems":[{"idExtractItem":1010682481,"idExtractItemType":"452","itemDescription":"ALUGUEL DE EQUIP HABILITADO","installmentNumber":null,"totalInstallments":null,"dueDate":"2019-11-25T00:00:00Z","entryDate":"2020-12-30T00:00:00Z","sourceValue":0,"addressComplement":null,"pointId":2770884,"productId":13561,"productDescription":"TOP HD PA GR 13561","proRataUnificationGroup":null,"proRataStartDate":null,"order":1,"itemGrouper":null},{"idExtractItem":1010682484,"idExtractItemType":"2","itemDescription":"MENSALIDADE TV PRINCIPAL","installmentNumber":null,"totalInstallments":null,"dueDate":"2019-11-25T00:00:00Z","entryDate":"2020-12-30T00:00:00Z","sourceValue":160.77,"addressComplement":null,"pointId":2770880,"productId":18913,"productDescription":"TOP HD MAX FID 18913","proRataUnificationGroup":null,"proRataStartDate":null,"order":1,"itemGrouper":null}]},{"groupId":16,"groupdescription":"A La Carte","amount":"20","order":"5","extractItems":[{"idExtractItem":1010682480,"idExtractItemType":"60","itemDescription":"MENSALIDADE CANAL A LA CARTE","installmentNumber":null,"totalInstallments":null,"dueDate":"2019-11-25T00:00:00Z","entryDate":"2020-12-30T00:00:00Z","sourceValue":0,"addressComplement":null,"pointId":2770880,"productId":11888,"productDescription":"REPLAY TV GRATIS","proRataUnificationGroup":null,"proRataStartDate":null,"order":1,"itemGrouper":null},{"idExtractItem":1010682482,"idExtractItemType":"60","itemDescription":"MENSALIDADE CANAL A LA CARTE","installmentNumber":null,"totalInstallments":null,"dueDate":"2019-11-25T00:00:00Z","entryDate":"2020-12-30T00:00:00Z","sourceValue":20,"addressComplement":null,"pointId":2770880,"productId":52792,"productDescription":"TELECINE HD EXC RET","proRataUnificationGroup":null,"proRataStartDate":null,"order":1,"itemGrouper":null},{"idExtractItem":1010682485,"idExtractItemType":"60","itemDescription":"MENSALIDADE CANAL A LA CARTE","installmentNumber":null,"totalInstallments":null,"dueDate":"2019-11-25T00:00:00Z","entryDate":"2020-12-30T00:00:00Z","sourceValue":0,"addressComplement":null,"pointId":2770884,"productId":19808,"productDescription":"TELECINE HD PARA DEMAIS PONTOS","proRataUnificationGroup":null,"proRataStartDate":null,"order":1,"itemGrouper":null},{"idExtractItem":1010682486,"idExtractItemType":"60","itemDescription":"MENSALIDADE CANAL A LA CARTE","installmentNumber":null,"totalInstallments":null,"dueDate":"2019-11-25T00:00:00Z","entryDate":"2020-12-30T00:00:00Z","sourceValue":0,"addressComplement":null,"pointId":2770884,"productId":31439,"productDescription":"REPLAY TV PARA DEMAIS PONTOS","proRataUnificationGroup":null,"proRataStartDate":null,"order":1,"itemGrouper":null}]},{"groupId":19,"groupdescription":"Mensalidade NET VIRTUA +","amount":"135.95","order":"9","extractItems":[{"idExtractItem":1010682477,"idExtractItemType":"400","itemDescription":"MENSALIDADE VIRTUA","installmentNumber":null,"totalInstallments":null,"dueDate":"2019-11-25T00:00:00Z","entryDate":"2020-12-30T00:00:00Z","sourceValue":0,"addressComplement":null,"pointId":2770881,"productId":3447,"productDescription":"COMODATO","proRataUnificationGroup":null,"proRataStartDate":null,"order":1,"itemGrouper":null},{"idExtractItem":1010682478,"idExtractItemType":"400","itemDescription":"MENSALIDADE VIRTUA","installmentNumber":null,"totalInstallments":null,"dueDate":"2019-11-25T00:00:00Z","entryDate":"2020-12-30T00:00:00Z","sourceValue":0,"addressComplement":null,"pointId":2770881,"productId":4700,"productDescription":"ACESSO GRATIS","proRataUnificationGroup":null,"proRataStartDate":null,"order":1,"itemGrouper":null},{"idExtractItem":1010682483,"idExtractItemType":"400","itemDescription":"MENSALIDADE VIRTUA","installmentNumber":null,"totalInstallments":null,"dueDate":"2019-11-25T00:00:00Z","entryDate":"2020-12-30T00:00:00Z","sourceValue":124.05,"addressComplement":null,"pointId":2770881,"productId":18196,"productDescription":"VIRTUA 120M FIDELIDADE 18196","proRataUnificationGroup":null,"proRataStartDate":null,"order":1,"itemGrouper":null},{"idExtractItem":1010682489,"idExtractItemType":"269","itemDescription":"MENS SEGURANCA E ARMAZ AVULSO","installmentNumber":null,"totalInstallments":null,"dueDate":"2019-11-25T00:00:00Z","entryDate":"2020-12-30T00:00:00Z","sourceValue":7,"addressComplement":null,"pointId":null,"productId":null,"productDescription":"ANTI VIRUS PROT DIG 1 DEVICE CB - PF","proRataUnificationGroup":null,"proRataStartDate":null,"order":1,"itemGrouper":1010682483},{"idExtractItem":1010682490,"idExtractItemType":"481","itemDescription":"MENS CONTEUDO DIGITAL AVULSO","installmentNumber":null,"totalInstallments":null,"dueDate":"2019-11-25T00:00:00Z","entryDate":"2020-12-30T00:00:00Z","sourceValue":7.5,"addressComplement":null,"pointId":null,"productId":null,"productDescription":"CINE EURO","proRataUnificationGroup":null,"proRataStartDate":null,"order":1,"itemGrouper":1010682483},{"idExtractItem":1010682491,"idExtractItemType":"481","itemDescription":"MENS CONTEUDO DIGITAL AVULSO","installmentNumber":null,"totalInstallments":null,"dueDate":"2019-11-25T00:00:00Z","entryDate":"2020-12-30T00:00:00Z","sourceValue":9.9,"addressComplement":null,"pointId":null,"productId":null,"productDescription":"CINE DOCS","proRataUnificationGroup":null,"proRataStartDate":null,"order":1,"itemGrouper":1010682483},{"idExtractItem":1010682492,"idExtractItemType":"481","itemDescription":"MENS CONTEUDO DIGITAL AVULSO","installmentNumber":null,"totalInstallments":null,"dueDate":"2019-11-25T00:00:00Z","entryDate":"2020-12-30T00:00:00Z","sourceValue":7.5,"addressComplement":null,"pointId":null,"productId":null,"productDescription":"CINE BR","proRataUnificationGroup":null,"proRataStartDate":null,"order":1,"itemGrouper":1010682483},{"idExtractItem":1010682496,"idExtractItemType":"361","itemDescription":"ESTORNO MENSALIDADE VIRTUA","installmentNumber":1,"totalInstallments":null,"dueDate":"2020-12-30T00:00:00Z","entryDate":"2020-12-30T00:00:00Z","sourceValue":-20,"addressComplement":null,"pointId":2770881,"productId":null,"productDescription":"VIRTUA 120M FIDELIDADE 18196","proRataUnificationGroup":null,"proRataStartDate":null,"order":1,"itemGrouper":1010682483}]},{"groupId":27,"groupdescription":"Serviços Técnicos","amount":"45","order":"18","extractItems":[{"idExtractItem":1010682494,"idExtractItemType":"250","itemDescription":"TAXA ASSIST TECNICA VIRTUA","installmentNumber":2,"totalInstallments":2,"dueDate":"2019-12-07T00:00:00Z","entryDate":"2020-12-30T00:00:00Z","sourceValue":45,"addressComplement":null,"pointId":null,"productId":18913,"productDescription":"TOP HD MAX FID 18913","proRataUnificationGroup":null,"proRataStartDate":null,"order":1,"itemGrouper":null}]},{"groupId":28,"groupdescription":"Descontos/Cancelamentos","amount":"-90","order":"19","extractItems":[{"idExtractItem":1010682475,"idExtractItemType":"324","itemDescription":"DESC TAXA DE SERVICOS TECNICOS","installmentNumber":1,"totalInstallments":null,"dueDate":"2019-12-14T00:00:00Z","entryDate":"2020-12-30T00:00:00Z","sourceValue":-45,"addressComplement":null,"pointId":null,"productId":18913,"productDescription":"TOP HD MAX FID 18913","proRataUnificationGroup":null,"proRataStartDate":null,"order":1,"itemGrouper":null},{"idExtractItem":1010682476,"idExtractItemType":"831","itemDescription":"DESCONTO DE MENSALIDADE","installmentNumber":1,"totalInstallments":null,"dueDate":"2019-12-16T00:00:00Z","entryDate":"2020-12-30T00:00:00Z","sourceValue":-45,"addressComplement":null,"pointId":2770880,"productId":18913,"productDescription":"TOP HD MAX FID 18913","proRataUnificationGroup":null,"proRataStartDate":null,"order":1,"itemGrouper":null}]},{"groupId":29,"groupdescription":"Outros","amount":"-20","order":"20","extractItems":[{"idExtractItem":1010682488,"idExtractItemType":"170","itemDescription":"REVISTA NET AVULSA","installmentNumber":null,"totalInstallments":null,"dueDate":"2019-11-25T00:00:00Z","entryDate":"2020-12-30T00:00:00Z","sourceValue":0,"addressComplement":null,"pointId":null,"productId":36681,"productDescription":"04_CLARO POSMAIS 6GB-SEM APARELHO-DOBRO","proRataUnificationGroup":null,"proRataStartDate":null,"order":1,"itemGrouper":null},{"idExtractItem":1010682495,"idExtractItemType":"362","itemDescription":"ESTORNO CANAL A LA CARTE","installmentNumber":1,"totalInstallments":null,"dueDate":"2020-12-30T00:00:00Z","entryDate":"2020-12-30T00:00:00Z","sourceValue":-20,"addressComplement":null,"pointId":2770880,"productId":52792,"productDescription":"TELECINE HD EXC RET","proRataUnificationGroup":null,"proRataStartDate":null,"order":1,"itemGrouper":null}]},{"groupId":32,"groupdescription":"Eventos Now","amount":"18.9","order":"22","extractItems":[{"idExtractItem":1010682493,"idExtractItemType":"456","itemDescription":"Rambo: Até o Fim - Pré Lançamento ","installmentNumber":1,"totalInstallments":1,"dueDate":"2019-12-05T00:41:54Z","entryDate":"2019-12-05T00:41:54Z","sourceValue":18.9,"addressComplement":null,"pointId":null,"productId":14646,"productDescription":"EVENTO ON DEMAND","proRataUnificationGroup":null,"proRataStartDate":null,"order":1,"itemGrouper":null}]}],"serviceGroup":null},{"partnerId":2,"partnerName":"EMBRATEL","chargeId":119858674,"generationDate":"2019-12-03T11:55:47Z","originalDueDate":"2019-12-25T00:00:00Z","dueDate":"2021-01-06T00:00:00Z","amountCharge":45.39,"amountPaid":null,"balance":45.39,"isExternalCollecting":null,"statusId":10,"status":"EM ABERTO","debtGroup":null,"serviceGroup":[{"groupId":1,"groupDescription":"NET FONE VIA EMBRATEL","partnerServiceId":1,"partnerServiceDescription":"NET FONE VIA EMBRATEL","partnerServiceAmount":45.39,"partnerExtracts":null,"partnerPhones":[{"originTerminal":"1139633313--FRANQUIA 001","amount":45.39,"partnerExtracts":[{"idExtractItem":499642927,"installmentNumber":null,"totalInstallments":null,"dueDate":"2019-12-25T00:00:00Z","entryDate":"2019-12-04T15:14:44Z","partnerItemId":143,"partnerItemDescription":"NETFONE ILIMITADO BRASIL 21 PROMOCIONAL","idExtractItemType":"1075","itemDescription":"NETFONE ILIM BRASIL 21 PROMO","amount":45.39,"isContested":"N","addressComplement":null,"details":[{"idDetExtractItem":3816093065,"sequenceNumber":1,"startDate":"2019-10-27T00:00:00Z","endDate":"2019-11-26T00:00:00Z","startTime":"      ","endTime":"      ","origin":"JAI SP","destination":null,"destinationCountry":"   ","callDuration":1,"callDurationUnit":"UNIDADE","callValue":32.39,"callDetailValue":45.39,"originTerminal":"1139633313--FRANQUIA 001","targetTerminal":null,"taxType":"E","entryDate":"2019-12-04T15:14:44Z"}]}]}]}]}]}}'
		);
		res1.setStatusCode(200);
		mock.addResponse(res1);
		HttpResponse res2 = new HttpResponse();
		res2.setBody(
			'{"apiVersion":"1;2019-12-04","transactionId":"Id-0ca72560da0ed5e0fdbb4dfd","data":{"invoiceId":170480727,"dueDate":"2019-11-25T00:00:00Z","partners":"NET / EMBRATEL / CLARO","paymentMethod":"DEBITO EM CONTA","status":"Pago","paymentDate":"2019-11-25T00:00:00Z","executeDate":"2019-11-26T00:00:00Z","cancelDate":null,"dueDay":25,"bestDayPaymentParameter":8,"billCode":"84680000006086902962019112505500000170480727","formatedBillCode":"84680000006-5 08690296201-7 91125055000-9 00170480727-8","amount":608.69,"totalTaxMessage":"Lei 12.741/12 - Tributos Federais (PIS e COFINS) 3,65% - ICMS TOTAL 56,28 - FUST TOTAL 2,69 - FUNTTEL TOTAL 1,33 - Lei 12.741/12 - Tributos Federais (PIS e COFINS) 3,65% - ICMS TOTAL 11,35","sourceInvoiceId":null,"invoiceItems":[{"name":"TV POR ASSINATURA","description":"01/10/19 A 31/10/19  MENSALIDADE CANAL A LA CARTE ","amount":20,"taxes":[{"taxType":"ICMS","value":2.4,"aliquot":25}]},{"name":"NET FONE VIA EMBRATEL / NET FONE VIA EMBRATE","description":"NET FONE VIA EMBRATEL / NET FONE VIA EMBRATE","amount":45.39,"taxes":[{"taxType":"ICMS","value":11.35,"aliquot":25},{"taxType":"COFINS","value":1.02,"aliquot":3}]},{"name":"PAY PER VIEW","description":"EVENTO NOW ","amount":29.8,"taxes":[{"taxType":"ICMS","value":3.58,"aliquot":25}]},{"name":"TV POR ASSINATURA","description":"01/10/19 A 31/10/19  MENSALIDADE TV PRINCIPAL SELEÇÃO TOP HD MAX FIDELIDADE ","amount":160.77,"taxes":[{"taxType":"ICMS","value":19.29,"aliquot":25},{"taxType":"COFINS","value":4.24,"aliquot":3},{"taxType":"FUST","value":1.36,"aliquot":1}]},{"name":"BANDA LARGA","description":"01/10/19 A 31/10/19  MENSALIDADE VIRTUA 120 MEGA FIDELIDADE ","amount":124.05,"taxes":[{"taxType":"ICMS","value":31.01,"aliquot":25},{"taxType":"COFINS","value":2.79,"aliquot":3}]}],"messages":[{"text":"Acesse net.com.br, para visualizar sua Fatura detalhada, emitir segunda via, tirar dúvidas, definir a forma de envio ou colocá-la em débito automático."},{"text":"A oferta conjunta NET Virtua + e composta pelo seu plano contratado e aplicativos digitais"},{"text":"SVA-PROTECAO DIGITAL  1 DEVICE CB:R$ 7 / -CINE EURO:R$ 7,5 / -CINE DOCS:R$ 9,9 / -CINE BR:R$ 7,5"}],"itemGroups":[{"chargeId":149858298,"groupId":13,"groupDescription":"Mensalidade NET TV","groupIdParent":12,"parentGroupDescription":"NET TV","amount":"160.77","productDescription":"01/10/19 A 31/10/19  MENSALIDADE TV PRINCIPAL SELEÇÃO TOP HD MAX FIDELIDADE"},{"chargeId":149858298,"groupId":16,"groupDescription":"A La Carte","groupIdParent":12,"parentGroupDescription":"NET TV","amount":"20","productDescription":"01/10/19 A 31/10/19  MENSALIDADE CANAL A LA CARTE"},{"chargeId":149858298,"groupId":19,"groupDescription":"Mensalidade NET VIRTUA +","groupIdParent":18,"parentGroupDescription":"NET VIRTUA +","amount":"155.95","productDescription":"01/10/19 A 31/10/19  OFERTA CONJUNTA 120 MEGA FIDELIDADE  + APLICATIVOS"},{"chargeId":149858298,"groupId":27,"groupDescription":"Serviços Técnicos","groupIdParent":21,"parentGroupDescription":"Itens Eventuais","amount":"45","productDescription":"07/11/19             TAXA ASSIST TECNICA VIRTUA 1/2"},{"chargeId":149858298,"groupId":32,"groupDescription":"Eventos Now","groupIdParent":21,"parentGroupDescription":"Itens Eventuais","amount":"14.9","productDescription":"20/10/19 - Aladdin"},{"chargeId":149858298,"groupId":32,"groupDescription":"Eventos Now","groupIdParent":21,"parentGroupDescription":"Itens Eventuais","amount":"14.9","productDescription":"25/10/19 - Luccas Neto em: Dia das Crianças"},{"chargeId":118698556,"groupId":1,"groupDescription":"NET FONE VIA EMBRATEL","groupIdParent":998,"parentGroupDescription":"NET Fone","amount":"45.39","productDescription":"ASSINATURA"},{"chargeId":118442242,"groupId":128,"groupDescription":"CLARO","groupIdParent":999,"parentGroupDescription":"Serviços Móveis","amount":"151.78","productDescription":"Mensalidade Claro"}],"partnerDebts":[{"partnerId":1,"partnerName":"NET","chargeId":149858298,"generationDate":"2019-11-06T00:00:00Z","originalDueDate":"2019-11-25T00:00:00Z","dueDate":null,"amountCharge":411.52,"amountPaid":411.52,"balance":0,"isExternalCollecting":null,"statusId":1,"status":"PAGAMENTO NORMAL","debtGroup":[{"groupId":13,"groupdescription":"Mensalidade NET TV","amount":"150.77","order":"2","extractItems":[{"idExtractItem":982133831,"idExtractItemType":"452","itemDescription":"ALUGUEL DE EQUIP HABILITADO","installmentNumber":null,"totalInstallments":null,"dueDate":"2019-10-25T00:00:00Z","entryDate":"2019-10-01T00:00:00Z","sourceValue":0,"addressComplement":null,"pointId":2770884,"productId":13561,"productDescription":"TOP HD PA GR 13561","proRataUnificationGroup":null,"proRataStartDate":null,"order":1,"itemGrouper":null},{"idExtractItem":982133846,"idExtractItemType":"2","itemDescription":"MENSALIDADE TV PRINCIPAL","installmentNumber":null,"totalInstallments":null,"dueDate":"2019-10-25T00:00:00Z","entryDate":"2019-10-01T00:00:00Z","sourceValue":150.77,"addressComplement":null,"pointId":2770880,"productId":18913,"productDescription":"TOP HD MAX FID 18913","proRataUnificationGroup":null,"proRataStartDate":null,"order":1,"itemGrouper":null}]},{"groupId":16,"groupdescription":"A La Carte","amount":"20","order":"5","extractItems":[{"idExtractItem":982133826,"idExtractItemType":"60","itemDescription":"MENSALIDADE CANAL A LA CARTE","installmentNumber":null,"totalInstallments":null,"dueDate":"2019-10-25T00:00:00Z","entryDate":"2019-10-01T00:00:00Z","sourceValue":0,"addressComplement":null,"pointId":2770880,"productId":11888,"productDescription":"REPLAY TV GRATIS","proRataUnificationGroup":null,"proRataStartDate":null,"order":1,"itemGrouper":null},{"idExtractItem":982133836,"idExtractItemType":"60","itemDescription":"MENSALIDADE CANAL A LA CARTE","installmentNumber":null,"totalInstallments":null,"dueDate":"2019-10-25T00:00:00Z","entryDate":"2019-10-01T00:00:00Z","sourceValue":20,"addressComplement":null,"pointId":2770880,"productId":52792,"productDescription":"TELECINE HD EXC RET","proRataUnificationGroup":null,"proRataStartDate":null,"order":1,"itemGrouper":null},{"idExtractItem":982133851,"idExtractItemType":"60","itemDescription":"MENSALIDADE CANAL A LA CARTE","installmentNumber":null,"totalInstallments":null,"dueDate":"2019-10-25T00:00:00Z","entryDate":"2019-10-01T00:00:00Z","sourceValue":0,"addressComplement":null,"pointId":2770884,"productId":19808,"productDescription":"TELECINE HD PARA DEMAIS PONTOS","proRataUnificationGroup":null,"proRataStartDate":null,"order":1,"itemGrouper":null},{"idExtractItem":982133855,"idExtractItemType":"60","itemDescription":"MENSALIDADE CANAL A LA CARTE","installmentNumber":null,"totalInstallments":null,"dueDate":"2019-10-25T00:00:00Z","entryDate":"2019-10-01T00:00:00Z","sourceValue":0,"addressComplement":null,"pointId":2770884,"productId":31439,"productDescription":"REPLAY TV PARA DEMAIS PONTOS","proRataUnificationGroup":null,"proRataStartDate":null,"order":1,"itemGrouper":null}]},{"groupId":19,"groupdescription":"Mensalidade NET VIRTUA +","amount":"155.95","order":"9","extractItems":[{"idExtractItem":982133807,"idExtractItemType":"400","itemDescription":"MENSALIDADE VIRTUA","installmentNumber":null,"totalInstallments":null,"dueDate":"2019-10-25T00:00:00Z","entryDate":"2019-10-01T00:00:00Z","sourceValue":0,"addressComplement":null,"pointId":2770881,"productId":3447,"productDescription":"COMODATO","proRataUnificationGroup":null,"proRataStartDate":null,"order":1,"itemGrouper":null},{"idExtractItem":982133813,"idExtractItemType":"400","itemDescription":"MENSALIDADE VIRTUA","installmentNumber":null,"totalInstallments":null,"dueDate":"2019-10-25T00:00:00Z","entryDate":"2019-10-01T00:00:00Z","sourceValue":0,"addressComplement":null,"pointId":2770881,"productId":4700,"productDescription":"ACESSO GRATIS","proRataUnificationGroup":null,"proRataStartDate":null,"order":1,"itemGrouper":null},{"idExtractItem":982133841,"idExtractItemType":"400","itemDescription":"MENSALIDADE VIRTUA","installmentNumber":null,"totalInstallments":null,"dueDate":"2019-10-25T00:00:00Z","entryDate":"2019-10-01T00:00:00Z","sourceValue":124.05,"addressComplement":null,"pointId":2770881,"productId":18196,"productDescription":"VIRTUA 120M FIDELIDADE 18196","proRataUnificationGroup":null,"proRataStartDate":null,"order":1,"itemGrouper":null},{"idExtractItem":982146619,"idExtractItemType":"269","itemDescription":"MENS SEGURANCA E ARMAZ AVULSO","installmentNumber":null,"totalInstallments":null,"dueDate":"2019-10-25T00:00:00Z","entryDate":"2019-10-01T00:00:00Z","sourceValue":7,"addressComplement":null,"pointId":null,"productId":null,"productDescription":"ANTI VIRUS PROT DIG 1 DEVICE CB - PF","proRataUnificationGroup":null,"proRataStartDate":null,"order":1,"itemGrouper":982133841},{"idExtractItem":982146620,"idExtractItemType":"481","itemDescription":"MENS CONTEUDO DIGITAL AVULSO","installmentNumber":null,"totalInstallments":null,"dueDate":"2019-10-25T00:00:00Z","entryDate":"2019-10-01T00:00:00Z","sourceValue":7.5,"addressComplement":null,"pointId":null,"productId":null,"productDescription":"CINE EURO","proRataUnificationGroup":null,"proRataStartDate":null,"order":1,"itemGrouper":982133841},{"idExtractItem":982146621,"idExtractItemType":"481","itemDescription":"MENS CONTEUDO DIGITAL AVULSO","installmentNumber":null,"totalInstallments":null,"dueDate":"2019-10-25T00:00:00Z","entryDate":"2019-10-01T00:00:00Z","sourceValue":9.9,"addressComplement":null,"pointId":null,"productId":null,"productDescription":"CINE DOCS","proRataUnificationGroup":null,"proRataStartDate":null,"order":1,"itemGrouper":982133841},{"idExtractItem":982146622,"idExtractItemType":"481","itemDescription":"MENS CONTEUDO DIGITAL AVULSO","installmentNumber":null,"totalInstallments":null,"dueDate":"2019-10-25T00:00:00Z","entryDate":"2019-10-01T00:00:00Z","sourceValue":7.5,"addressComplement":null,"pointId":null,"productId":null,"productDescription":"CINE BR","proRataUnificationGroup":null,"proRataStartDate":null,"order":1,"itemGrouper":982133841}]},{"groupId":27,"groupdescription":"Serviços Técnicos","amount":"45","order":"18","extractItems":[{"idExtractItem":986457480,"idExtractItemType":"250","itemDescription":"TAXA ASSIST TECNICA VIRTUA","installmentNumber":1,"totalInstallments":2,"dueDate":"2019-11-07T00:00:00Z","entryDate":"2019-11-07T00:00:00Z","sourceValue":45,"addressComplement":null,"pointId":null,"productId":18913,"productDescription":"TOP HD MAX FID 18913","proRataUnificationGroup":null,"proRataStartDate":null,"order":1,"itemGrouper":null}]},{"groupId":32,"groupdescription":"Eventos Now","amount":"29.8","order":"22","extractItems":[{"idExtractItem":973264941,"idExtractItemType":"456","itemDescription":"Aladdin ","installmentNumber":1,"totalInstallments":1,"dueDate":"2019-10-20T00:43:09Z","entryDate":"2019-10-20T00:43:09Z","sourceValue":14.9,"addressComplement":null,"pointId":null,"productId":14646,"productDescription":"EVENTO ON DEMAND","proRataUnificationGroup":null,"proRataStartDate":null,"order":1,"itemGrouper":null},{"idExtractItem":981661037,"idExtractItemType":"456","itemDescription":"Luccas Neto em: Dia das Crianças ","installmentNumber":1,"totalInstallments":1,"dueDate":"2019-10-25T23:11:03Z","entryDate":"2019-10-25T23:11:03Z","sourceValue":14.9,"addressComplement":null,"pointId":null,"productId":14646,"productDescription":"EVENTO ON DEMAND","proRataUnificationGroup":null,"proRataStartDate":null,"order":1,"itemGrouper":null}]}],"serviceGroup":null},{"partnerId":2,"partnerName":"EMBRATEL","chargeId":118698556,"generationDate":"2019-10-31T14:11:26Z","originalDueDate":"2019-11-25T00:00:00Z","dueDate":"2019-11-25T00:00:00Z","amountCharge":45.39,"amountPaid":45.39,"balance":0,"isExternalCollecting":null,"statusId":1,"status":"PAGAMENTO NORMAL","debtGroup":null,"serviceGroup":[{"groupId":1,"groupDescription":"NET FONE VIA EMBRATEL","partnerServiceId":1,"partnerServiceDescription":"NET FONE VIA EMBRATEL","partnerServiceAmount":45.39,"partnerExtracts":null,"partnerPhones":[{"originTerminal":"1139633313--FRANQUIA 001","amount":45.39,"partnerExtracts":[{"idExtractItem":496920070,"installmentNumber":null,"totalInstallments":null,"dueDate":"2019-11-25T00:00:00Z","entryDate":"2019-11-06T10:20:07Z","partnerItemId":143,"partnerItemDescription":"NETFONE ILIMITADO BRASIL 21 PROMOCIONAL","idExtractItemType":"1075","itemDescription":"NETFONE ILIM BRASIL 21 PROMO","amount":45.39,"isContested":"N","addressComplement":null,"details":[{"idDetExtractItem":3803146440,"sequenceNumber":1,"startDate":"2019-09-27T00:00:00Z","endDate":"2019-10-26T00:00:00Z","startTime":"      ","endTime":"      ","origin":"JAI SP","destination":null,"destinationCountry":"   ","callDuration":1,"callDurationUnit":"UNIDADE","callValue":32.39,"callDetailValue":45.39,"originTerminal":"1139633313--FRANQUIA 001","targetTerminal":null,"taxType":"E","entryDate":"2019-11-06T10:20:07Z"}]}]}]}]},{"partnerId":16,"partnerName":"CLARO","chargeId":118442242,"generationDate":"2019-10-28T14:31:13Z","originalDueDate":"2019-11-25T00:00:00Z","dueDate":"2019-11-25T00:00:00Z","amountCharge":151.78,"amountPaid":151.78,"balance":0,"isExternalCollecting":null,"statusId":1,"status":"PAGAMENTO NORMAL","debtGroup":null,"serviceGroup":[{"groupId":128,"groupDescription":"CLARO","partnerServiceId":128,"partnerServiceDescription":"CLARO","partnerServiceAmount":151.78,"partnerExtracts":[{"idExtractItem":496188975,"installmentNumber":null,"totalInstallments":null,"dueDate":"2019-11-25T00:00:00Z","entryDate":"2019-10-28T14:34:00Z","partnerItemId":82,"partnerItemDescription":"Mensalidade Claro","idExtractItemType":"998","itemDescription":"CLARO","amount":151.78,"isContested":"N","addressComplement":null,"details":[{"idDetExtractItem":3799141076,"sequenceNumber":1,"startDate":null,"endDate":null,"startTime":null,"endTime":null,"origin":null,"destination":null,"destinationCountry":null,"callDuration":1,"callDurationUnit":null,"callValue":151.78,"callDetailValue":151.78,"originTerminal":null,"targetTerminal":null,"taxType":null,"entryDate":"2019-10-28T14:34:09Z"}]}],"partnerPhones":null}]}]}}'
		);
		res2.setStatusCode(200);
		mock.addResponse(res2);
		return mock;
	}
}